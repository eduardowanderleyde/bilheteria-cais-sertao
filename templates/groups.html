{% extends "base.html" %}
{% set active = "groups" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Vendas em Grupo</h1>

<form method="post" action="/groups/new" class="grid lg:grid-cols-2 gap-6">
  <!-- Dados do Grupo -->
  <div class="bg-white rounded-xl p-6 shadow space-y-4">
    <h2 class="text-xl font-bold mb-4">Dados do Grupo</h2>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Visita</label>
        <select name="visit_type" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300" required>
          <option value="">Selecione</option>
          <option value="agendada">Agendada</option>
          <option value="espontanea">Espont√¢nea</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Of√≠cio</label>
        <select name="has_oficio" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300" required>
          <option value="">Selecione</option>
          <option value="1">Sim</option>
          <option value="0">N√£o</option>
        </select>
      </div>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Institui√ß√£o</label>
      <input name="institution_name" placeholder="Nome da institui√ß√£o" class="w-full h-12 border rounded-lg px-3" required>
    </div>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Respons√°vel</label>
        <input name="responsible_name" placeholder="Nome do respons√°vel" class="w-full h-12 border rounded-lg px-3" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Data Agendada</label>
        <input name="scheduled_date" type="date" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
    
    <div class="grid sm:grid-cols-3 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">UF</label>
        <select name="state" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300">
          <option value="">Selecione</option>
          <option value="AC">AC - Acre</option>
          <option value="AL">AL - Alagoas</option>
          <option value="AP">AP - Amap√°</option>
          <option value="AM">AM - Amazonas</option>
          <option value="BA">BA - Bahia</option>
          <option value="CE">CE - Cear√°</option>
          <option value="DF">DF - Distrito Federal</option>
          <option value="ES">ES - Esp√≠rito Santo</option>
          <option value="GO">GO - Goi√°s</option>
          <option value="MA">MA - Maranh√£o</option>
          <option value="MT">MT - Mato Grosso</option>
          <option value="MS">MS - Mato Grosso do Sul</option>
          <option value="MG">MG - Minas Gerais</option>
          <option value="PA">PA - Par√°</option>
          <option value="PB">PB - Para√≠ba</option>
          <option value="PR">PR - Paran√°</option>
          <option value="PE">PE - Pernambuco</option>
          <option value="PI">PI - Piau√≠</option>
          <option value="RJ">RJ - Rio de Janeiro</option>
          <option value="RN">RN - Rio Grande do Norte</option>
          <option value="RS">RS - Rio Grande do Sul</option>
          <option value="RO">RO - Rond√¥nia</option>
          <option value="RR">RR - Roraima</option>
          <option value="SC">SC - Santa Catarina</option>
          <option value="SP">SP - S√£o Paulo</option>
          <option value="SE">SE - Sergipe</option>
          <option value="TO">TO - Tocantins</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Cidade</label>
        <input name="city" placeholder="Cidade" class="w-full h-12 border rounded-lg px-3">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">IES/Munic√≠pio</label>
        <input name="ies_municipio" placeholder="IES ou Munic√≠pio" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Total Estudantes</label>
        <input name="total_students" type="number" min="0" value="0" class="w-full h-12 border rounded-lg px-3">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Total Professores</label>
        <input name="total_teachers" type="number" min="0" value="0" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
  </div>
  
  <!-- Ingressos do Grupo -->
  <div class="bg-white rounded-xl p-6 shadow space-y-4">
    <h2 class="text-xl font-bold mb-4">Ingressos do Grupo</h2>
    
    <div class="grid sm:grid-cols-3 gap-3">
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Inteiras (R$10)</div>
        <input type="number" name="qtd_inteira" value="0" min="0" class="w-full h-12 border rounded px-3" id="qtd_inteira">
      </div>
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Meias (R$5)</div>
        <input type="number" name="qtd_meia" value="0" min="0" class="w-full h-12 border rounded px-3 mb-2" id="qtd_meia">
        <select name="reason_meia" class="w-full h-10 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300 text-sm">
          <option value="">Motivo da meia entrada</option>
          <option value="idoso">Idoso (60+)</option>
          <option value="professor_ins_particular">Professor - Institui√ß√£o Particular</option>
          <option value="estudante_ins_particular">Estudante - Institui√ß√£o Particular</option>
          <option value="pcd_acompanhante">PCD + Acompanhante</option>
          <option value="doador_sangue">Doador de Sangue</option>
          <option value="enfermagem">Profissional de Enfermagem</option>
        </select>
      </div>
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Gratuitas (R$0)</div>
        <input type="number" name="qtd_gratuita" value="0" min="0" class="w-full h-12 border rounded px-3 mb-2" id="qtd_gratuita">
        <select name="reason_gratuita" class="w-full h-10 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300 text-sm">
          <option value="">Motivo da gratuidade</option>
          <option value="estudante_rede_publica">Estudante - Rede P√∫blica</option>
          <option value="professor_ins_publica">Professor - Institui√ß√£o P√∫blica</option>
          <option value="guia_turismo">Guia de Turismo</option>
          <option value="crianca_0_5">Crian√ßa 0-5 anos</option>
          <option value="politica_gratuidade">Pol√≠tica de Gratuidade</option>
          <option value="funcionario_museu">Funcion√°rio do Museu</option>
          <option value="policial_bombeiro_militar">Policial/Bombeiro Militar</option>
        </select>
      </div>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Observa√ß√£o</label>
      <textarea name="note" placeholder="Observa√ß√µes sobre o grupo" class="w-full h-20 border rounded-lg px-3 py-2"></textarea>
    </div>
    
    <!-- Forma de pagamento -->
    <div class="mt-4">
      <div class="text-sm font-medium text-gray-700 mb-2">Forma de pagamento</div>
      <div class="flex gap-4">
        <label class="inline-flex items-center gap-2 cursor-pointer">
          <input type="radio" name="payment_method" value="credito" required class="w-4 h-4 text-blue-600">
          <span class="text-sm">üí≥ Cr√©dito</span>
        </label>
        <label class="inline-flex items-center gap-2 cursor-pointer">
          <input type="radio" name="payment_method" value="debito" class="w-4 h-4 text-blue-600">
          <span class="text-sm">üí≥ D√©bito</span>
        </label>
        <label class="inline-flex items-center gap-2 cursor-pointer">
          <input type="radio" name="payment_method" value="pix" class="w-4 h-4 text-blue-600">
          <span class="text-sm">üì± PIX</span>
        </label>
        <label class="inline-flex items-center gap-2 cursor-pointer">
          <input type="radio" name="payment_method" value="dinheiro" class="w-4 h-4 text-blue-600">
          <span class="text-sm">üíµ Dinheiro</span>
        </label>
      </div>
    </div>
    
    <div class="bg-slate-50 p-4 rounded-lg">
      <div class="text-slate-500 text-sm">Resumo</div>
      <div class="text-2xl font-bold mt-2" id="previewTotal">Total calculado na confirma√ß√£o</div>
    </div>
    
    <button type="submit" class="w-full h-14 rounded-xl bg-blue-700 text-white text-lg">
      Registrar Grupo
    </button>
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    
    <a href="/dashboard" class="block text-center mt-3 text-slate-600">‚Üê Voltar ao Dashboard</a>
  </div>
</form>
{% endblock %}
