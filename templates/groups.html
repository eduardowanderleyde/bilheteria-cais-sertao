{% extends "base.html" %}
{% set active = "groups" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Vendas em Grupo</h1>

<form method="post" action="/groups/new" class="grid lg:grid-cols-2 gap-6">
  <!-- Dados do Grupo -->
  <div class="bg-white rounded-xl p-6 shadow space-y-4">
    <h2 class="text-xl font-bold mb-4">Dados do Grupo</h2>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Visita</label>
        <select name="visit_type" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300" required>
          <option value="">Selecione</option>
          <option value="agendada">Agendada</option>
          <option value="espontanea">Espontânea</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Ofício</label>
        <select name="has_oficio" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300" required>
          <option value="">Selecione</option>
          <option value="1">Sim</option>
          <option value="0">Não</option>
        </select>
      </div>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Instituição</label>
      <input name="institution_name" placeholder="Nome da instituição" class="w-full h-12 border rounded-lg px-3" required>
    </div>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Responsável</label>
        <input name="responsible_name" placeholder="Nome do responsável" class="w-full h-12 border rounded-lg px-3" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Data Agendada</label>
        <input name="scheduled_date" type="date" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
    
    <div class="grid sm:grid-cols-3 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">UF</label>
        <select name="state" class="w-full h-12 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300">
          <option value="">Selecione</option>
          <option value="AC">AC - Acre</option>
          <option value="AL">AL - Alagoas</option>
          <option value="AP">AP - Amapá</option>
          <option value="AM">AM - Amazonas</option>
          <option value="BA">BA - Bahia</option>
          <option value="CE">CE - Ceará</option>
          <option value="DF">DF - Distrito Federal</option>
          <option value="ES">ES - Espírito Santo</option>
          <option value="GO">GO - Goiás</option>
          <option value="MA">MA - Maranhão</option>
          <option value="MT">MT - Mato Grosso</option>
          <option value="MS">MS - Mato Grosso do Sul</option>
          <option value="MG">MG - Minas Gerais</option>
          <option value="PA">PA - Pará</option>
          <option value="PB">PB - Paraíba</option>
          <option value="PR">PR - Paraná</option>
          <option value="PE">PE - Pernambuco</option>
          <option value="PI">PI - Piauí</option>
          <option value="RJ">RJ - Rio de Janeiro</option>
          <option value="RN">RN - Rio Grande do Norte</option>
          <option value="RS">RS - Rio Grande do Sul</option>
          <option value="RO">RO - Rondônia</option>
          <option value="RR">RR - Roraima</option>
          <option value="SC">SC - Santa Catarina</option>
          <option value="SP">SP - São Paulo</option>
          <option value="SE">SE - Sergipe</option>
          <option value="TO">TO - Tocantins</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Cidade</label>
        <input name="city" placeholder="Cidade" class="w-full h-12 border rounded-lg px-3">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">IES/Município</label>
        <input name="ies_municipio" placeholder="IES ou Município" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
    
    <div class="grid sm:grid-cols-2 gap-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Total Estudantes</label>
        <input name="total_students" type="number" min="0" value="0" class="w-full h-12 border rounded-lg px-3">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Total Professores</label>
        <input name="total_teachers" type="number" min="0" value="0" class="w-full h-12 border rounded-lg px-3">
      </div>
    </div>
  </div>
  
  <!-- Ingressos do Grupo -->
  <div class="bg-white rounded-xl p-6 shadow space-y-4">
    <h2 class="text-xl font-bold mb-4">Ingressos do Grupo</h2>
    
    <div class="grid sm:grid-cols-3 gap-3">
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Inteiras (R$10)</div>
        <input type="number" name="qtd_inteira" value="0" min="0" class="w-full h-12 border rounded px-3" id="qtd_inteira">
      </div>
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Meias (R$5)</div>
        <input type="number" name="qtd_meia" value="0" min="0" class="w-full h-12 border rounded px-3 mb-2" id="qtd_meia">
        <select name="reason_meia" class="w-full h-10 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300 text-sm">
          <option value="">Motivo da meia entrada</option>
          <option value="idoso">Idoso (60+)</option>
          <option value="professor_ins_particular">Professor - Instituição Particular</option>
          <option value="estudante_ins_particular">Estudante - Instituição Particular</option>
          <option value="pcd_acompanhante">PCD + Acompanhante</option>
          <option value="doador_sangue">Doador de Sangue</option>
          <option value="enfermagem">Profissional de Enfermagem</option>
        </select>
      </div>
      <div class="p-4 border rounded-xl">
        <div class="font-semibold mb-1">Gratuitas (R$0)</div>
        <input type="number" name="qtd_gratuita" value="0" min="0" class="w-full h-12 border rounded px-3 mb-2" id="qtd_gratuita">
        <select name="reason_gratuita" class="w-full h-10 border rounded-lg px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white border-slate-300 text-sm">
          <option value="">Motivo da gratuidade</option>
          <option value="estudante_rede_publica">Estudante - Rede Pública</option>
          <option value="professor_ins_publica">Professor - Instituição Pública</option>
          <option value="guia_turismo">Guia de Turismo</option>
          <option value="crianca_0_5">Criança 0-5 anos</option>
          <option value="politica_gratuidade">Política de Gratuidade</option>
          <option value="funcionario_museu">Funcionário do Museu</option>
          <option value="policial_bombeiro_militar">Policial/Bombeiro Militar</option>
        </select>
      </div>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Observação</label>
      <textarea name="note" placeholder="Observações sobre o grupo" class="w-full h-20 border rounded-lg px-3 py-2"></textarea>
    </div>
    
    <div class="bg-slate-50 p-4 rounded-lg">
      <div class="text-slate-500 text-sm">Resumo</div>
      <div class="text-2xl font-bold mt-2" id="previewTotal">Total calculado na confirmação</div>
    </div>
    
    <button type="submit" class="w-full h-14 rounded-xl bg-blue-700 text-white text-lg">
      Registrar Grupo
    </button>
    
    <a href="/dashboard" class="block text-center mt-3 text-slate-600">← Voltar ao Dashboard</a>
  </div>
</form>
{% endblock %}
